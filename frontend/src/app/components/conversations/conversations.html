<title-template [title]="'Une conversation sans fin...'" [generatedType]="'Conversation générée'" />

<div class="flex flex-col h-[calc(100vh-15rem)]">
  <span class="flex-1 overflow-y-auto list-none flex flex-col gap-2">

    @if (chatService.resList().length <= 0) {
      <span class="flex justify-center items-center !mt-10 ">
        <h3 class="!text-[16px]">
        Commencez votre conversation avec l'IA...
        </h3>
      </span>
    }

    @for (item of chatService.resList(); track $index) {
    <li>
      {{ item.sender }}: {{ item.message }}
    </li>
    }

    @if (isResponseLoading()) {
      <span class="list-none flex text-center">
        <li>L'IA: </li>
        <ngx-skeleton-loader count="10" 
        [theme]="{ width: '16px', height: '16px' }" 
        appearance="circle" />
      </span>
    } 
  </span>

  <hr class="!my-3 !w-[90%] !mx-auto" />

  <span class="flex justify-center items-center gap-8">
    <input class="green-input" [formControl]="msgControl" placeholder="Entrez votre message..."
      (keydown.enter)="onSubmitMsg()" />

    <button class="mic-container" (click)="onToggleMic()">
      <mat-icon>{{ isMicOn() ? 'mic' : 'mic_off'}}</mat-icon>
    </button>
  </span>

</div>